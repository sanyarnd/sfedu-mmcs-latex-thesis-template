# Шаблон работ для студентов ФИИТ Института Математики, Механики и Компьютерных Наук им. Воровича

Шаблон для курсовых и выпускных работ студентов ФИИТ ИММиКН им. Воровича.

В шаблоне присутствуют следующие варианты работ:
* Курсовая работа в конце третьего курса
* Отчет о преддипломной практике
* Выпускная квалификационная работа (бакалавриат)
* Магистерская диссертация (требует проверки)

Внешний вид работы можно посмотреть [здесь](https://github.com/sanyarnd/sfedu-mmcs-latex-thesis-template/blob/master/diploma.pdf).



## Зависимости

* [Текстовый редактор](https://www.gnu.org/software/emacs/) или [специализированная программа](https://www.texstudio.org/).
* Компилятор `XeLaTeX`
* Система управления библиографией `Biber`

_`XeLaTeX` и `Biber` используют `UTF-8` (поэтому исключаются проблемы с кодировкой и смешиванием языков) и не требуют дополнительных пакетов для поддержки мультиязычности._

* Обязательные пакеты
  + [koma-script](https://ctan.org/pkg/koma-script)
  + [kvoptions](https://ctan.org/pkg/kvoptions)
  + [etoolbox](https://ctan.org/pkg/etoolbox)
  + [xkeyval](https://ctan.org/pkg/xkeyval)
  + [ifthen](https://ctan.org/pkg/ifthen)
  + [scrlayer-scrpage](https://ctan.org/pkg/scrlayer-scrpage)
  + [fontspec](https://ctan.org/pkg/fontspec)
  + [polyglossia](https://ctan.org/pkg/polyglossia)
  + [microtype](https://ctan.org/pkg/microtype)
  + [indentfirst](https://ctan.org/pkg/indentfirst)
  + [csquotes](https://ctan.org/pkg/csquotes)
  + [extdash](https://ctan.org/pkg/extdash)
  + [amsthm](https://ctan.org/pkg/amsthm)
  + [amsfonts](https://ctan.org/pkg/amsfonts)
  + [amsmath](https://ctan.org/pkg/amsmath)
  + [amssymb](https://ctan.org/pkg/amssymb)
  + [amscd](https://ctan.org/pkg/amscd)
  + [mathtools](https://ctan.org/pkg/mathtools)
  + [unicode-math](https://ctan.org/pkg/unicode-math)
  + [setspace](https://ctan.org/pkg/setspace)
  + [biblatex](https://ctan.org/pkg/biblatex)
  + [hyperref](https://ctan.org/pkg/hyperref)
* Пакеты включенные по-умолчанию
  + [algorithm](https://ctan.org/pkg/algorithm)
  + [algpseudocode](https://ctan.org/pkg/algpseudocode)
  + [listings](https://ctan.org/pkg/listings)
  + [enumitem](https://ctan.org/pkg/enumitem)
  + [tabularx](https://ctan.org/pkg/tabularx)
  + [appendix](https://ctan.org/pkg/appendix)
  + [graphicx](https://ctan.org/pkg/graphicx)
  + [subfig](https://ctan.org/pkg/subfig)
  + [float](float)
* Пакеты выключенные по-умолчанию
  + [showframe](https://ctan.org/pkg/showframe)
  + [pythontex](https://ctan.org/pkg/pythontex)

Используемые шрифты:

* Times New Roman
* Arial
* Courier New
* XITS Math

Для получения данных зависимостей потребуется дистрибутив `LaTeX`.

_Все пакеты можно скачать и заставить работать по отдельности, но это достаточно сложно и не нужно._

### Установка TeX Live

Стандартным кроссплатформенным решением является [TeX Live](https://www.tug.org/texlive/). Присутствует сборка в виде .iso (~3-4GB) и вариант сетевой установки.

#### Windows

Скачать образ либо сетевой инсталлятор на сайте [TeX Live](https://www.tug.org/texlive/).

#### Linux

Если вы используете `Linux`, то скачивать инсталлятор не требуется. Все необходимые пакеты будут доступны в репозиториях вашего дистрибутива.

##### Ubuntu, Linux Mint
> sudo apt-get install texlive-full biber

##### Arch Linux
> sudo pacman -S texlive-most texlive-bin texlive-core texlive-lang biber

##### Fedora
> sudo dnf install texlive-scheme-full biber

_Обратите внимание, что в некоторых дистрибутивах `Biber` не входит в состав `TeX Live` и распространяется как отдельный пакет, в отличие от `Windows`._



## Настройка TeXStudio

Войдите в настройки и выберите нужный компилятор для текста и библиографии. Делается это на вкладке `Build`. Нас интересует `XeLaTeX` и `Biber`.

<!-- ![Настройки](./images/settings.png) -->
<img src="./images/settings.png" width="70%">



## Как пользоваться

Открыть `diploma.tex` и вписать свои данные в макрос установки. В окружении `document` присутствуют заготовки для стандартных разделов работы.

По аналогии создать в папке `items/` необходимые вам .tex файлы и включить их в основной документ при помощи команды `\include` (либо `\input`, [разница](https://tex.stackexchange.com/a/32058/72742) для _нас_ не сильно существенная). Обратите внимание, что на `Windows` не допускаются кириллические имена файлов. Причина кроется в кодировке CP-1251. На `Linux` же такой проблемы не существует (UTF-8 на уровне ядра).

Также обратите внимание на специальный комментарий (который тоже необходимо скопировать), присутствующий на первой строке:

> % !TEX root = ../diploma.tex

Это, так называемый, магический комментарий. В нем можно указать программу-компилятор, кодировку, язык, а также корневой документ. В комментарии выше указан именно корневой документ. Это сделано для удобства: вызывать компиляцию можно на любом файле проекта, а не только `diploma.tex`. Другие магические комментарии могут пригодиться, если вы не используете `TeXStudio`. [Подробнее](https://www.texdev.net/2011/03/24/texworks-magic-comments/).

Все изображения помещаются в каталог `images/`. Он является корневым для команд, типа `\includegraphics`. В данном каталоге можно создавать дополнительные каталоги.

Например, вы создали каталог `chap01` в который поместили файл `image.png`. Тогда команда включения изображения должна быть следующего вида: `\includegraphics{chap01/image}`. Дописывать расширение файла не обязательно (только в случае отсутствия конфликта имен).



## Стандартные ошибки при работе с LaTeX

* При запуске компиляции есть вероятность получить ошибку об отсутсвии пакетов. В этом случае воспользуйтесь менеджером `TeX Live (Windows)` и доустановите пакеты из сети либо найтите эти пакеты в `texlive-пакетах` вашего дистрибутива и установите их (`Linux`).

* Если при сборке библиография не появилась -- не пугайтесь. `Biber` нужно запускать **отдельно**. В `TeXStudio` это делается очень удобно: `Tools -> Bibliography`, либо запустите его руками в терминале, если вы пользуетесь обычным редактором.

* Если вдруг вместо ссылки на уравнение, цитирование, или то, на что можно состаться, вы получаете имя самой метки, просто запустите компиляцию второй раз. `LaTeX` требует двух-трех проходов для составления ссылок, оглавления и ряда других вещей.

    Пояснение проблемы на примере цитирования и библиографии:
    + Сначала `LaTeX` собирает всю информацию об использовании `\cite` в .aux файл.
    + Запускается `Biber`, он получает эту информацию и записывает соответствующие записи в .bbl файл, сортирует и форматирует их в соответствии с вашими настройками (в нашем случае это стиль ГОСТ).
    + При следующем запуске .bbl файл включается в основной документ, обновленная информация о `\cite` записывается в .aux.
    + Только после предоставления всех этих данных LaTeX может выдать полностью корректный документ.

    Схема работы выше аналогично переносится на использования `\ref` и `\label`.

* Если список литературы не появляется -- действия аналогичны. запустить компиляцию, запустить компиляцию библиографии, запустить компиляцию.

    Замечание: _в дальнейшем достаточно одного прохода компиляции, но если вдруг возникают проблемы, алгоритм выше их поможет решить._

* Вы добавили данные в список литературы, все правильно скомпилировали, но список так и не появился. Причина кроется в том, что по-умолчанию LaTeX игнорирует источники на которые нет ссылок. Если вас это не устраивает, то пригодится команда `\nocite{*}`. Ее можно поместить в начало документа.



## Прочие ошибки

#### Windows:
* Если сборка даже пустого проекта занимает минуты, то запустите от имени администратора утилиту `fc-cache.exe`, которая находится в папке `C:\texlive\2017\bin\win32`.
